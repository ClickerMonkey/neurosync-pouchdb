!function(e,u,t,g){u.Debugs.POUCH_INIT=2e3,u.Debugs.POUCH_ALL=2001,u.Debugs.POUCH_ALL_ERROR=2002,u.Debugs.POUCH_GET=2003,u.Debugs.POUCH_GET_ERROR=2004,u.Debugs.POUCH_CREATE=2005,u.Debugs.POUCH_CREATE_ERROR=2006,u.Debugs.POUCH_UPDATE=2007,u.Debugs.POUCH_UPDATE_ERROR=2008,u.Debugs.POUCH_REMOVE=2009,u.Debugs.POUCH_REMOVE_ERROR=2010,u.Debugs.POUCH_LIVE_REMOVE=2011,u.Debugs.POUCH_LIVE_SAVE=2012,u.Debugs.POUCH_LIVE_SAVE_IGNORE=2013,u.debugMap&&(u.debugMap[u.Debugs.POUCH_INIT]="PouchDB Initialized",u.debugMap[u.Debugs.POUCH_ALL]="PouchDB All",u.debugMap[u.Debugs.POUCH_ALL_ERROR]="PouchDB All Error",u.debugMap[u.Debugs.POUCH_GET]="PouchDB Get",u.debugMap[u.Debugs.POUCH_GET_ERROR]="PouchDB Get Error",u.debugMap[u.Debugs.POUCH_CREATE]="PouchDB Create",u.debugMap[u.Debugs.POUCH_CREATE_ERROR]="PouchDB Create Error",u.debugMap[u.Debugs.POUCH_UPDATE]="PouchDB Update",u.debugMap[u.Debugs.POUCH_UPDATE_ERROR]="PouchDB Update Error",u.debugMap[u.Debugs.POUCH_REMOVE]="PouchDB Remove",u.debugMap[u.Debugs.POUCH_REMOVE_ERROR]="PouchDB Remove Error",u.debugMap[u.Debugs.POUCH_LIVE_REMOVE]="PouchDB Live Remove",u.debugMap[u.Debugs.POUCH_LIVE_SAVE]="PouchDB Live Save",u.debugMap[u.Debugs.POUCH_LIVE_SAVE_IGNORE]="PouchDB Live Save Ignored");var n={},o=u.live,_=u.rest;u.store;u.pouch=function(u,t){return u in n?n[u]:n[u]=new e(u,t)},u.restSet||(u.rest=function(t){if(!t.api)return _.call(this,t);t.fullSave=!0,t.cache=u.Cache.None,t.origin=u.uuid();var g=this.pouch(t.name,t.storeOptions),n={include_docs:!0};return e.replicate(t.name,t.api,{live:!0,retry:!0}),u.debug(u.Debugs.POUCH_INIT,t,g),{pouchdb:g,all:function(e,o){function _(g){u.debug(u.Debugs.POUCH_ALL,t,g);for(var n=[],o=0;o<g.rows.length;o++)n.push(g.rows[o].doc);e(n)}function E(e){u.debug(u.Debugs.POUCH_ALL_ERROR,t,e),o([],e.status)}g.allDocs(n).then(_)["catch"](E)},get:function(e,n,o){function _(g){u.debug(u.Debugs.POUCH_GET,t,e,s,g),e._rev=g._rev,n(g)}function E(g){u.debug(u.Debugs.POUCH_GET_ERROR,t,e,s,g),o(null,g.status)}var s=String(e.$key());g.get(s).then(_)["catch"](E)},create:function(e,n,o,_){function E(g){u.debug(u.Debugs.POUCH_CREATE,t,e,n,g),g.ok?(e._rev=g.rev,n._rev=g.rev,o({})):_(null,g.status)}function s(g){u.debug(u.Debugs.POUCH_CREATE_ERROR,t,e,n,g),_(null,g.status)}n._id=String(e.$key()),n.$origin=t.origin,g.put(n).then(E)["catch"](s)},update:function(e,n,o,_){function E(g){u.debug(u.Debugs.POUCH_UPDATE,t,e,n,g),g.ok?(e._rev=g.rev,n._rev=g.rev,o({})):_(null,g.status)}function s(g){u.debug(u.Debugs.POUCH_UPDATE_ERROR,t,e,n,g),_(null,g.status)}n._id=String(e.$key()),n._rev=e._rev,n.$origin=t.origin,g.put(n).then(E)["catch"](s)},remove:function(e,n,o){function _(g){u.debug(u.Debugs.POUCH_REMOVE,t,e,s,g),g.ok?n({}):o({},g.status)}function E(g){u.debug(u.Debugs.POUCH_REMOVE_ERROR,t,e,s,g),o({},g.status)}var s=String(e.$key());g.remove(s).then(_)["catch"](E)},query:function(e,u,t){u([])}}},u.restSet=!0),u.liveSet||(u.live=function(e){function t(t){t.deleted?(u.debug(u.Debugs.POUCH_LIVE_REMOVE,e,t),e.liveRemove(t.id)):t.doc.$origin!==e.origin?(u.debug(u.Debugs.POUCH_LIVE_SAVE,e,t),e.liveSave(t.id,t.doc)):u.debug(u.Debugs.POUCH_LIVE_SAVE_IGNORE,e,t)}if(!e.api)return o.call(this,e);var g=this.pouch(e.name),n={since:"now",live:!0,include_docs:!0};return g.changes(n).on("change",t),{pouchdb:g,save:u.noop,remove:u.noop}},u.liveSet=!0)}(PouchDB,Neuro,this);
//# sourceMappingURL=neurosync-pouchdb.min.js.map
