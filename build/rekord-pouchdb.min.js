/* rekord-pouchdb 1.4.1 - A rekord binding to pouchdb - implementing Rekord.rest, Rekord.live, & Rekord.store by Philip Diffenderfer */
!function(e,u,n,t){function o(e,n){return e in r?r[e]:r[e]=new u(e,n)}function _(e){if(!e.api)return c.call(this,e);e.fullSave=!0,e.cache=n.Cache.None,e.origin=n.uuid();var t=this.pouch(e.name,e.storeOptions),o={include_docs:!0};return u.replicate(e.name,e.api,{live:!0,retry:!0}),n.debug(i.POUCH_INIT,e,t),{pouchdb:t,all:function(u,_){function E(t){n.debug(i.POUCH_ALL,e,t);for(var o=[],_=0;_<t.rows.length;_++)o.push(t.rows[_].doc);u(o)}function r(u){n.debug(i.POUCH_ALL_ERROR,e,u),_([],u.status)}t.allDocs(o).then(E)["catch"](r)},get:function(u,o,_){function E(t){n.debug(i.POUCH_GET,e,u,O,t),u._rev=t._rev,o(t)}function r(t){n.debug(i.POUCH_GET_ERROR,e,u,O,t),_(null,t.status)}var O=String(u.$key());t.get(O).then(E)["catch"](r)},create:function(u,o,_,E){function r(t){n.debug(i.POUCH_CREATE,e,u,o,t),t.ok?(u._rev=t.rev,o._rev=t.rev,_({})):E(null,t.status)}function O(t){n.debug(i.POUCH_CREATE_ERROR,e,u,o,t),E(null,t.status)}o._id=String(u.$key()),o.$origin=e.origin,t.put(o).then(r)["catch"](O)},update:function(u,o,_,E){function r(t){n.debug(i.POUCH_UPDATE,e,u,o,t),t.ok?(u._rev=t.rev,o._rev=t.rev,_({})):E(null,t.status)}function O(t){n.debug(i.POUCH_UPDATE_ERROR,e,u,o,t),E(null,t.status)}o._id=String(u.$key()),o._rev=u._rev,o.$origin=e.origin,t.put(o).then(r)["catch"](O)},remove:function(u,o,_){function E(t){n.debug(i.POUCH_REMOVE,e,u,O,t),t.ok?o({}):_({},t.status)}function r(t){n.debug(i.POUCH_REMOVE_ERROR,e,u,O,t),_({},t.status)}var O=String(u.$key());t.remove(O).then(E)["catch"](r)},query:function(e,u,n,t){n([])}}}function E(e){function u(u){u.deleted?(n.debug(i.POUCH_LIVE_REMOVE,e,u),e.liveRemove(u.id)):u.doc.$origin!==e.origin?(n.debug(i.POUCH_LIVE_SAVE,e,u),e.liveSave(u.id,u.doc)):n.debug(i.POUCH_LIVE_SAVE_IGNORE,e,u)}if(!e.api)return O.call(this,e);var t=this.pouch(e.name),o={since:"now",live:!0,include_docs:!0};return t.changes(o).on("change",u),{pouchdb:t,save:n.noop,remove:n.noop}}var i=n.Debugs,r={},O=n.live,c=n.rest;n.store;i.POUCH_INIT=2e3,i.POUCH_ALL=2001,i.POUCH_ALL_ERROR=2002,i.POUCH_GET=2003,i.POUCH_GET_ERROR=2004,i.POUCH_CREATE=2005,i.POUCH_CREATE_ERROR=2006,i.POUCH_UPDATE=2007,i.POUCH_UPDATE_ERROR=2008,i.POUCH_REMOVE=2009,i.POUCH_REMOVE_ERROR=2010,i.POUCH_LIVE_REMOVE=2011,i.POUCH_LIVE_SAVE=2012,i.POUCH_LIVE_SAVE_IGNORE=2013,n.debugMap&&(n.debugMap[i.POUCH_INIT]="PouchDB Initialized",n.debugMap[i.POUCH_ALL]="PouchDB All",n.debugMap[i.POUCH_ALL_ERROR]="PouchDB All Error",n.debugMap[i.POUCH_GET]="PouchDB Get",n.debugMap[i.POUCH_GET_ERROR]="PouchDB Get Error",n.debugMap[i.POUCH_CREATE]="PouchDB Create",n.debugMap[i.POUCH_CREATE_ERROR]="PouchDB Create Error",n.debugMap[i.POUCH_UPDATE]="PouchDB Update",n.debugMap[i.POUCH_UPDATE_ERROR]="PouchDB Update Error",n.debugMap[i.POUCH_REMOVE]="PouchDB Remove",n.debugMap[i.POUCH_REMOVE_ERROR]="PouchDB Remove Error",n.debugMap[i.POUCH_LIVE_REMOVE]="PouchDB Live Remove",n.debugMap[i.POUCH_LIVE_SAVE]="PouchDB Live Save",n.debugMap[i.POUCH_LIVE_SAVE_IGNORE]="PouchDB Live Save Ignored"),n.pouch=o,n.setRest(_),n.setLive(E)}(this,this.PouchDB,this.Rekord);
//# sourceMappingURL=rekord-pouchdb.min.js.map
